specVersion: 0.0.3
description: Shoyu NFT Platform
repository: https://github.com/shoyunft/subgraph
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: TokenFactory
    network: {{network}}
    source:
      address: '{{tokenFactory}}'
      abi: ITokenFactory
      startBlock: {{startBlock}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.1
      language: wasm/assemblyscript
      entities:
        - NFTContract
        - NFT
        - NFTOwner
        - NFTTag
        - SocialToken
      abis:
        - name: ITokenFactory
          file: node_modules/@shoyunft/contracts/abis/ITokenFactory.json
      eventHandlers:
        - event: DeployNFT721(indexed address,indexed address,string,string,uint256[],address,uint8)
          handler: handleDeployNFT721
        - event: DeployNFT1155(indexed address,indexed address,uint256[],uint256[],address,uint8)
          handler: handleDeployNFT1155
        - event: DeploySocialToken(indexed address,indexed address,string,string,indexed address)
          handler: handleDeploySocialToken
        - event: Tag(indexed address,indexed uint256,indexed string,uint256)
          handler: handleTag
      file: ./src/mapping/TokenFactory.ts
  - kind: ethereum/contract
    name: ERC721ExchangeV0
    network: {{network}}
    source:
      address: '{{erc721Exchange}}'
      abi: IBaseExchange
      startBlock: {{startBlock}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.1
      language: wasm/assemblyscript
      entities:
        - Bid
      abis:
        - name: IBaseExchange
          file: node_modules/@shoyunft/contracts/abis/IBaseExchange.json
      eventHandlers:
        - event: Bid(indexed bytes32,address,uint256,uint256,address,address)
          handler: handleBid
        - event: Cancel(indexed bytes32)
          handler: handleCancel
        - event: Execute(indexed bytes32,address,uint256,uint256,address,address)
          handler: handleExecute
      file: ./src/mapping/ERC721ExchangeV0.ts
  - kind: ethereum/contract
    name: ERC1155ExchangeV0
    network: {{network}}
    source:
      address: '{{erc1155Exchange}}'
      abi: IBaseExchange
      startBlock: {{startBlock}}
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.1
      language: wasm/assemblyscript
      entities:
        - Bid
      abis:
        - name: IBaseExchange
          file: node_modules/@shoyunft/contracts/abis/IBaseExchange.json
      eventHandlers:
        - event: Bid(indexed bytes32,address,uint256,uint256,address,address)
          handler: handleBid
        - event: Cancel(indexed bytes32)
          handler: handleCancel
        - event: Execute(indexed bytes32,address,uint256,uint256,address,address)
          handler: handleExecute
      file: ./src/mapping/ERC1155ExchangeV0.ts
